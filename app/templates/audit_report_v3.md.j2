# ðŸ” Python Audit Report

**Generated**: {{ timestamp }}  
**Repository**: {{ repo_name }}  
**Duration**: {{ duration if duration else "N/A" }}

---

## ðŸ“Š Overall Score: {{ score }}/100 ({{ grade }})

### Score Breakdown
| Component | Penalty | Details |
|-----------|---------|---------|
| ðŸ”’ Security | -{{ security_penalty }} | {{ security.total_issues }} issues, {{ secrets.total_secrets }} secrets |
| âœ… Testing | -{{ testing_penalty }} | {{ tests.coverage_percent }}% coverage |
| ðŸ§¹ Quality | -{{ quality_penalty }} | {{ deadcode.total_items }} dead code items |
| **Final** | **{{ score }}** | Grade: {{ grade }} |

---

## ðŸ”’ Security Analysis

**Status**: {{ security_severity.label }}  
**Issues Found**: {{ security.total_issues }}  
**Secrets Detected**: {{ secrets.total_secrets }}

{% if security.total_issues > 0 %}
### ðŸ›¡ï¸ Security Issues

{% for issue in security.issues[:5] %}
- **{{ issue.severity }}**: {{ issue.message }} (`{{ issue.file }}:{{ issue.line }}`)
{% endfor %}

{% if security.total_issues > 5 %}
... and {{ security.total_issues - 5 }} more issues
{% endif %}

{% else %}
âœ… No security issues detected by Bandit

{% endif %}

---

## ðŸ§ª Test Coverage

**Coverage**: {{ tests.coverage_percent }}%  
**Assessment**: {{ coverage_severity.label }}  
**Status**: {{ coverage_severity.description }}

**Recommendation**: {{ coverage_severity.recommendation }}

**Test Breakdown**:
- Unit Tests: {{ tests.test_breakdown.unit }}
- Integration Tests: {{ tests.test_breakdown.integration }}
- E2E Tests: {{ tests.test_breakdown.e2e }}

{% if tests.warning %}
âš ï¸ **Warning**: {{ tests.warning }}
{% endif %}

{% if tests.tests_passed > 0 or tests.tests_failed > 0 %}
### Tests & Coverage Details

**Test Results**:
- âœ… Passed: {{ tests.tests_passed }}
- âŒ Failed: {{ tests.tests_failed }}
- â­ï¸ Skipped: {{ tests.tests_skipped }}

{% if tests.coverage_report %}
**Coverage Report**:
```
{{ tests.coverage_report }}
```
{% endif %}

{% if tests.test_list and tests.test_list|length > 0 %}
**Test Files Scanned** ({{ tests.test_list|length }} tests):
{% for test in tests.test_list[:10] %}
- {{ test }}
{% endfor %}
{% if tests.test_list|length > 10 %}
... and {{ tests.test_list|length - 10 }} more tests
{% endif %}
{% endif %}
{% endif %}

---

## ðŸ“‚ Project Structure

{% if structure.total_py_files %}
**Python Files**: {{ structure.total_py_files }}  
**Total Lines**: {{ structure.total_lines }}  
**Top Directories**: {{ structure.top_directories|join(', ') }}

### Directory Tree
```
{{ structure.directory_tree }}
```
{% else %}
No structure information available
{% endif %}

---

## ðŸ§¹ Code Quality

### Linting Issues
{{ quality.total_issues }} issues found

{% if quality.total_issues > 0 %}
- High Severity: {{ quality.severity_counts.HIGH or 0 }}
- Medium Severity: {{ quality.severity_counts.MEDIUM or 0 }}
- Low: {{ quality.severity_counts.LOW or 0 }}

**Top Issues**:
{% for issue in quality.issues[:10] %}
- {{ issue.severity }}: {{ issue.message }} (`{{ issue.file }}:{{ issue.line }}`)
{% endfor %}

{% else %}
âœ… No linting issues detected
{% endif %}

### Dead Code
{{ deadcode.total_items }} items found

{% if deadcode.total_items > 0 %}
- Unused variables: {{ deadcode.unused_vars|length }}
- Unused imports: {{ deadcode.unused_imports|length }}
- Dead functions: {{ deadcode.dead_functions|length }}

**Top Issues**:
{% for item in (deadcode.unused_vars + deadcode.unused_imports)[:5] %}
- `{{ item.name }}` in {{ item.file }}:{{ item.line }}
{% endfor %}

{% else %}
âœ… No dead code detected
{% endif %}

### Code Duplication
{{ duplication.total_duplicates }} similar code blocks found

{% if duplication.total_duplicates > 0 %}

{% if duplication.total_duplicates > 10 %}
âš ï¸ High duplication detected. Consider refactoring common patterns.
{% endif %}

#### ðŸŽ­ DUPLICATES

**Most Duplicated Functions** (similarity > 80%):
{% for dup in duplication.duplicates %}
{% if dup.similarity > 80 %}
- `{{ dup.function_name }}` ({{ dup.similarity|round(1) }}% similar) - {{ dup.count }} instances
  - Locations: {{ dup.locations|join(', ') }}
{% endif %}
{% endfor %}
{% else %}
âœ… No significant code duplication detected
{% endif %}

---

## ðŸ“Š Detailed Findings

### Architecture Overview
{% if architecture.total_files %}
**Total Files Analyzed**: {{ architecture.total_files }}  
**Total Dependencies**: {{ architecture.total_dependencies }}

#### Dependency Graph
```mermaid
{{ architecture.mermaid_graph }}
```
{% else %}
Architecture analysis not available
{% endif %}

### Efficiency Analysis
{% if efficiency.total_high_complexity > 0 %}
**High Complexity Functions**: {{ efficiency.total_high_complexity }}

{% for func in efficiency.high_complexity_functions[:5] %}
- `{{ func.name }}` in {{ func.file }} (complexity: {{ func.complexity }})
{% endfor %}
{% else %}
âœ… No high-complexity functions detected (all under threshold)
{% endif %}

### Cleanup Recommendations
{% if cleanup.total_size_mb > 0 %}
**Cleanup Available**: {{ cleanup.total_size_mb }}MB

**Targets**:
{% for target, count in cleanup.cleanup_targets.items() %}
- {{ target }}: {{ count }} directories
{% endfor %}

**Items**:
{% for item in cleanup.cleanup_items[:10] %}
- {{ item }}
{% endfor %}
{% else %}
âœ… No cleanup needed
{% endif %}

---

## ðŸ’¡ Recommendations

**Based on the calculated score of {{ score }}/100:**

{% if testing_penalty >= 30 %}
1. **ðŸ”´ CRITICAL - Test Coverage**: {{ coverage_severity.recommendation }}
{% endif %}

{% if security_penalty >= 20 %}
2. **ðŸ”´ CRITICAL - Security**: Address {{ security.total_issues + secrets.total_secrets }} security findings immediately
{% endif %}

{% if quality_penalty >= 15 %}
3. **ðŸŸ¡ HIGH - Code Quality**: Clean up {{ deadcode.total_items }} dead code items
{% endif %}

{% if score < 70 %}
4. **Overall**: Current grade ({{ grade }}) indicates significant technical debt. Prioritize above items.
{% elif score < 90 %}
4. **Overall**: Good foundation ({{ grade }}). Focus on incremental improvements.
{% else %}
4. **Overall**: Excellent codebase ({{ grade }}). Maintain current standards.
{% endif %}

---

## ðŸ”§ Tools Executed

{% for tool in tools_summary %}
- **{{ tool.name }}**: {{ tool.status }} ({{ tool.duration_s }}s)
{% endfor %}

---

*This report uses pre-calculated scores based on the algorithm in README.md. All numeric values are deterministic and not subject to interpretation.*

## ðŸ›¡ï¸ Report Integrity Check
**Status:** {% if all_sections_present %}âœ… Complete{% else %}âš ï¸ Incomplete{% endif %}
{% if missing_sections %}Missing sections: {{ missing_sections|join(', ') }}{% endif %}