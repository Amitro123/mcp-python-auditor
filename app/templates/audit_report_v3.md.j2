# ðŸ” Python Audit Report

**Generated**: {{ timestamp }}  
**Repository**: {{ repo_name }}  
**Duration**: {{ duration }}

---

## ðŸ“Š Overall Score: {{ score }}/100 ({{ grade }})

### Score Breakdown
| Component | Penalty | Details |
|-----------|---------|---------|
| ðŸ”’ Security | -{{ security_penalty }} | {{ raw_results.bandit.total_issues }} issues, {{ raw_results.secrets.total_secrets }} secrets |
| âœ… Testing | -{{ testing_penalty }} | {{ raw_results.tests.coverage_percent }}% coverage |
| ðŸ§¹ Quality | -{{ quality_penalty }} | {{ raw_results.dead_code.total_dead }} dead code items |
| **Final** | **{{ score }}** | Grade: {{ grade }} |

---

## ðŸ”’ Security Analysis

**Status**: {{ security_severity.label }}  
**Issues Found**: {{ raw_results.bandit.total_issues }}  
**Secrets Detected**: {{ raw_results.secrets.total_secrets }}

{% if raw_results.bandit.total_issues > 0 %}
### Security Issues
{% for issue in raw_results.bandit.issues[:5] %}
- **{{ issue.severity }}**: {{ issue.message }} (`{{ issue.file }}:{{ issue.line }}`)
{% endfor %}
{% if raw_results.bandit.total_issues > 5 %}
... and {{ raw_results.bandit.total_issues - 5 }} more issues
{% endif %}
{% else %}
âœ… No security issues detected by Bandit
{% endif %}

---

## ðŸ§ª Test Coverage

**Coverage**: {{ raw_results.tests.coverage_percent }}%  
**Assessment**: {{ coverage_severity.label }}  
**Status**: {{ coverage_severity.description }}

**Recommendation**: {{ coverage_severity.recommendation }}

**Test Breakdown**:
- Unit Tests: {{ raw_results.tests.test_breakdown.unit }}
- Integration Tests: {{ raw_results.tests.test_breakdown.integration }}
- E2E Tests: {{ raw_results.tests.test_breakdown.e2e }}

{% if raw_results.tests.status == "error" %}
âš ï¸ **Warning**: Test execution encountered errors. Coverage may be incomplete.
{% endif %}

---

## ðŸ§¹ Code Quality

### Dead Code
{{ raw_results.dead_code.total_dead }} items found

{% if raw_results.dead_code.total_dead > 0 %}
- Unused variables: {{ raw_results.dead_code.dead_variables|length }}
- Unused imports: {{ raw_results.dead_code.unused_imports|length }}
- Dead functions: {{ raw_results.dead_code.dead_functions|length }}

**Top Issues**:
{% for item in (raw_results.dead_code.dead_variables + raw_results.dead_code.unused_imports)[:5] %}
- `{{ item.name }}` in {{ item.file }}:{{ item.line }}
{% endfor %}
{% else %}
âœ… No dead code detected
{% endif %}

### Code Duplication
{{ raw_results.duplication.total_duplicates }} similar code blocks found

{% if raw_results.duplication.total_duplicates > 10 %}
âš ï¸ High duplication detected. Consider refactoring common patterns.

**Most Duplicated** (similarity > 95%):
{% for dup in raw_results.duplication.duplicates %}
{% if dup.similarity > 95 %}
- `{{ dup.function_name }}` ({{ dup.similarity|round(1) }}% similar) - {{ dup.count }} instances
{% endif %}
{% endfor %}
{% endif %}

---

## ðŸ’¡ Recommendations

**Based on the calculated score of {{ score }}/100:**

{% if testing_penalty >= 30 %}
1. **ðŸ”´ CRITICAL - Test Coverage**: {{ coverage_severity.recommendation }}
{% endif %}

{% if security_penalty >= 20 %}
2. **ðŸ”´ CRITICAL - Security**: Address {{ raw_results.bandit.total_issues + raw_results.secrets.total_secrets }} security findings immediately
{% endif %}

{% if quality_penalty >= 15 %}
3. **ðŸŸ¡ HIGH - Code Quality**: Clean up {{ raw_results.dead_code.total_dead }} dead code items
{% endif %}

{% if score < 70 %}
4. **Overall**: Current grade ({{ grade }}) indicates significant technical debt. Prioritize above items.
{% elif score < 90 %}
4. **Overall**: Good foundation ({{ grade }}). Focus on incremental improvements.
{% else %}
4. **Overall**: Excellent codebase ({{ grade }}). Maintain current standards.
{% endif %}

---

## ðŸ”§ Tools Executed

{% for tool_name, tool_data in raw_results.items() %}
- **{{ tool_name }}**: {{ tool_data.status }} ({{ tool_data.duration_s }}s)
{% endfor %}

---

*This report uses pre-calculated scores based on the algorithm in README.md. All numeric values are deterministic and not subject to interpretation.*
